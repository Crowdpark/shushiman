package{	import flash.display.MovieClip;	import flash.display.DisplayObject;	import flash.filters.DisplacementMapFilter;	import flash.utils.getQualifiedClassName;		/**	 * @author szalwinski	 */	 	public class LevelGenerator extends MovieClip	{		private var _log:String = "";		private var _number:uint = 0;		private var _fields:Array = [];		private var _prevField:Field;		private var _rowNew:Boolean = true;				public function LevelGenerator()		{			_log += '{ ';			level();			gather();			convert();			_log += "}}";			trace(_log);		}				private function level():void		{			_log += '"level":{';			_log += '"id":' + _number + ',';		}				private function gather():void		{			for (var i:uint=0; i < objects.numChildren; i++)			{				var dataClip:DisplayObject = objects.getChildAt(i);				var field:Field = new Field();				field.id = i;				field.x = dataClip.x;				field.y = dataClip.y;				field.type = getQualifiedClassName(dataClip);				_fields.push(field);				}		}				private function convert():void		{			_log += '"fields":[[';						for (var i:uint = 0; i < _fields.length-1; i++)			{				var field:Field = _fields[i];								if (_prevField && _prevField.y < field.y)				{					_log += '],[';					_rowNew = true;				}						if (_rowNew)				{					_log += field;				}				else				{					_log += "," + field;				}								_rowNew = false;				_prevField = field;			}						_log += "]]";		}	}}